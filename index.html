<html>
    <head>
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
      <!-- <script src="web3.min.js"></script> -->
      <script>
        const contract_address = "0x4283ffe1eF457E9004693e6f3a77c3b5E87c2515";
        const abi = [
			{
				"constant": false,
				"inputs": [
					{
						"name": "id",
						"type": "uint256"
					},
					{
						"name": "way",
						"type": "bool"
					},
					{
						"name": "essence",
						"type": "uint256"
					},
					{
						"name": "count",
						"type": "uint256"
					},
					{
						"name": "price",
						"type": "uint256"
					}
				],
				"name": "addOffer",
				"outputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"constant": false,
				"inputs": [
					{
						"name": "user",
						"type": "address"
					},
					{
						"name": "essence",
						"type": "uint256"
					},
					{
						"name": "count",
						"type": "uint256"
					}
				],
				"name": "mintAssetDec",
				"outputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"constant": false,
				"inputs": [
					{
						"name": "user",
						"type": "address"
					},
					{
						"name": "essence",
						"type": "uint256"
					},
					{
						"name": "count",
						"type": "uint256"
					}
				],
				"name": "mintAssetInc",
				"outputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"constant": false,
				"inputs": [
					{
						"name": "user",
						"type": "address"
					},
					{
						"name": "count",
						"type": "uint256"
					}
				],
				"name": "mintToken",
				"outputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"constant": false,
				"inputs": [
					{
						"name": "idIn",
						"type": "uint256"
					},
					{
						"name": "idOut",
						"type": "uint256"
					}
				],
				"name": "swapOffer",
				"outputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "constructor"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": false,
						"name": "id",
						"type": "uint256"
					},
					{
						"indexed": false,
						"name": "way",
						"type": "bool"
					},
					{
						"indexed": false,
						"name": "owner",
						"type": "address"
					},
					{
						"indexed": false,
						"name": "essence",
						"type": "uint256"
					},
					{
						"indexed": false,
						"name": "count",
						"type": "uint256"
					},
					{
						"indexed": false,
						"name": "price",
						"type": "uint256"
					}
				],
				"name": "CreateOffer",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": false,
						"name": "idIn",
						"type": "uint256"
					},
					{
						"indexed": false,
						"name": "idOut",
						"type": "uint256"
					},
					{
						"indexed": false,
						"name": "price",
						"type": "uint256"
					},
					{
						"indexed": false,
						"name": "count",
						"type": "uint256"
					}
				],
				"name": "MatchOffer",
				"type": "event"
			},
			{
				"constant": true,
				"inputs": [
					{
						"name": "user",
						"type": "address"
					},
					{
						"name": "essence",
						"type": "uint256"
					}
				],
				"name": "getAssets",
				"outputs": [
					{
						"name": "",
						"type": "uint256"
					}
				],
				"payable": false,
				"stateMutability": "view",
				"type": "function"
			},
			{
				"constant": true,
				"inputs": [
					{
						"name": "id",
						"type": "uint256"
					}
				],
				"name": "getOffer",
				"outputs": [
					{
						"name": "",
						"type": "uint256"
					}
				],
				"payable": false,
				"stateMutability": "view",
				"type": "function"
			},
			{
				"constant": true,
				"inputs": [
					{
						"name": "user",
						"type": "address"
					}
				],
				"name": "getTokens",
				"outputs": [
					{
						"name": "",
						"type": "uint256"
					}
				],
				"payable": false,
				"stateMutability": "view",
				"type": "function"
			}
		];

        let contract;
        window.addEventListener('load', () => {
          if (typeof(window.web3) == 'undefined') {
              return console.log("Metamask is not installed");
          }

		  contract = web3.eth.contract(abi).at(contract_address);
		  

	
		// console.log(web3);
		// console.log(contract);

		function getTokens(user) {
			   contract.getTokens.call(
				   user,
				   {gasPrice: web3.toWei(8.1, 'Gwei'), gas: 3000000},
				   (error, result) => {
					   if(error) {
						   return console.log(error);
					   }
						console.log("txhash: " + result);
				   }
			   )
		   
		   }
		
		   getTokens(1).then(res => {
			   console.log(res)
		   })

		});
		



		// web3 = window.web3;
		// // console.log(web3);

		// if (typeof web3 !== 'undefined') {
		// 	// console.log('---')
		// 	web3 = new Web3(web3.currentProvider);
		// 	window.web3 = new Web3(web3.currentProvider);

		// 	// console.log(web3.currentProvider);

		// 	if (web3.currentProvider.isMetaMask === true) {
		// 		// console.log('!!!')
		// 		token = web3.eth.contract(abi).at(contract_address);
		// 		account = web3.eth.accounts[0];

		// 		// $('#message').append('<div>' + account + '</div');
		// 		// console.log(token);
		// 		// console.log(account);

		// 		// get_balance();
		// 	} else {
		// 		console.log('Install MetaMask!')
		// 	}
		// }




		// function getTokens(user) {
		// 	web3.eth.getTokens(user, function(err, res) {
		// 		// $('#message').html(account + ' &nbsp; &nbsp; ' + Math.round(res / 10e14) / 1000 + ' ETH');
		// 		console.log(res);
		// 	});
		// }

		// getTokens();
      </script>
    </head>
    <body>
      123
      <button id="button" onclick="newEmployee('2', '2', '2')">new employee</button>    
	</body>
</html>